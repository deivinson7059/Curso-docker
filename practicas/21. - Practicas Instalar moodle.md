# Prácticas Docker

## 21. Moodle - Docker installation

- Cree una red Docker:

```
docker network create moodle-network
```

- Descargue la imagen de MariaDB del repositorio Docker:

```
docker pull mariadb
```

- Descargue la imagen de Moodle del repositorio Docker:

```
docker pull bitnami/moodle
```

- Verifique que la imagen se descargó correctamente:

```
REPOSITORY              TAG                 IMAGE ID            CREATED             SIZE
bitnami/moodle          latest              3a8761542378        4 hours ago         1.16GB
mariadb                 latest              cbbff8572fa8        3 days ago          406MB
```

- Creamos un volumen para almacenar los datos de la base de datos:

```
docker volume create mariadb-data
```

- Verifique que el volumen se creó correctamente:

```
docker volume inspect mariadb-data

[
    {
        "CreatedAt": "2020-09-19T16:13:00Z",
        "Driver": "local",
        "Labels": {},
        "Mountpoint": "/var/lib/docker/volumes/mariadb-data/_data",
        "Name": "mariadb-data",
        "Options": {},
        "Scope": "local"
    }
]
```

- Opcionalmente, cree un enlace simbólico a una ubicación de acceso más fácil.

```
ln -s /var/lib/docker/volumes/mariadb-data/_data /mariadb
```

- Cree un contenedor en modo Background MariaDB:

```
docker run -d --name moodledb -v mariadb-data:/var/lib/mysql --network moodle-network -e MYSQL_ROOT_PASSWORD=danisoft -e MYSQL_USER=moodle -e MYSQL_PASSWORD=danisoft -e MYSQL_DATABASE=moodle mariadb
```

- Creamos un volumen para almacenar los datos Moodle:

```
docker volume create moodle-data
```

- Verifique que el volumen se creó correctamente:

```
docker volume inspect moodle-data

[
    {
        "CreatedAt": "2020-09-20T19:02:51Z",
        "Driver": "local",
        "Labels": {},
        "Mountpoint": "/var/lib/docker/volumes/moodle-data/_data",
        "Name": "moodle-data",
        "Options": {},
        "Scope": "local"
    }
]
```

- Opcionalmente, cree un enlace simbólico a una ubicación de acceso más fácil.

```
ln -s /var/lib/docker/volumes/moodle-data/_data /moodle
```

- Cree un contenedor en modo Background Moodle:

```
docker run -d --name moodle -p 80:8080 -p 443:8443 -v moodle-data:/bitnami/moodle --network moodle-network -e MOODLE_DATABASE_HOST=moodledb -e MOODLE_DATABASE_USER=moodle -e MOODLE_DATABASE_PASSWORD=danisoft -e MOODLE_DATABASE_NAME=moodle bitnami/moodle:latest

```
