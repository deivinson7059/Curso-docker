# Prácticas Docker

## 6. Contenedores en background

Vamos a crear un contenedor en bacgrlound con una imagen del
famoso servidor Web Apache:

- La imagen que hay en Docker hub se llama “httpd”:

```
docker run --name apache1 -d httpd

Unable to find image 'httpd:latest' locally
latest: Pulling from library/httpd
c229119241af: Pull complete
1805d911aae4: Pull complete
e3709b515d9c: Pull complete
4f53b8f15873: Pull complete
3b60f356ab85: Pull complete
Digest:
sha256:e3c40b99ffa305c6e52346a6618b1fb47ea0568c999b26f8900
cd26febab1160
Status: Downloaded newer image for httpd:latest
f8f960cc16862b665f3fbb13399f37879e03d03f1f98329aa9de6086d1
3ffe6f
```

- Podemos comprobar que se descarga la imagen de docker hub y que
  luego genera un contenedor devolviéndonos su id, es decir su
  identificativo.Podemos ver el contenedor creado:

```
docker ps
CONTAINER ID        IMAGE       COMMAND     CREATED     STATUS  PORTS NAMES
c229119241af        httpd  "httpd-foreground"  2 minutes ago Up 2 minutes apache1 80/tcp apache1
```

- Vamos a hacer otra prueba, pero con Ubuntu.Lanzamos un comando similar al anterior:

```
docker run --name ubuntu5 -d ubuntu

8b5fcba242d5f4affc4f2d995d2a71d5a3ca2d0bff8536b5d1056df4b6
5ed5e2
```

- En principio parece que funciona correctamente, pero si hacemos un
  docker ps veremos que en realidad no se ha quedado en background
  sino que se ha parado. Esto es debido a que un contenedor de Ubuntu
  no tiene nada que hacer mientras que un contenedor de Apache sí que
  tiene un comando para ser ejecutado en el arranque. Por tanto no solo
  es necesario poner la opción “-d” para que esté en modo background
  sino que además la imagen tiene que estar preparada para ser
  ejecutada en modo background:

```
docker ps -a

CONTAINER ID        IMAGE       COMMAND     CREATED     STATUS  PORTS NAMES
8b5fcba242d5        ubuntu  "bash"  2 minutes ago Up 2 minutes ubuntu5
```

- Una posibilidad que podemos utilizar es poner las opciones “-it” es decir en modo interactivo y de esa manera sí que podemos ponerlo en marcha:

```
docker run --name ubuntu6 -d -it ubuntu

8fc1b55042f8fc56de07f403913dd3c5321b3a1e27f11ee350a373d4ed
5fefb1

docker ps
CONTAINER ID        IMAGE       COMMAND     CREATED     STATUS  PORTS NAMES
8fc1b55042f8        ubuntu  "bash"  2 minutes ago Up 2 minutes ubuntu6
f8f960cc1686        httpd   "httpd-foreground"  6 minutes ago Up 6 minutes 80/tcp apache1
```
